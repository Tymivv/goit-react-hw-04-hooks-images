{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/App/App.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.jsx","components/Modal/Modal.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/servises/articlesApi.jsx","components/App/App.jsx","index.js"],"names":["module","exports","Searchbar","state","image","handleNameChange","event","setState","currentTarget","value","toLowerCase","trim","handleSubmit","preventDefault","toast","error","console","log","props","onSubmit","className","styles","searchbar","SearchForm","this","style","form","SearchForminput","type","name","onChange","placeholder","SearchFormbutton","SearchFormbuttonlabel","Component","modalRootRef","document","querySelector","Modal","onEscPress","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","largeimage","createPortal","backdrop","onClick","modal","src","alt","ImageGalleryItem","articles","map","id","webformatURL","largeImageURL","a","ImageGalleryItemimage","ImageGallery","openModal","getImglarge","openModalGallery","closest","getAttribute","Button","API_KEY","axios","defaults","baseURL","fetchData","page","queryOptions","URLSearchParams","key","q","image_type","orientation","safesearch","per_page","get","toString","data","App","loader","handleFormSubmit","nextPages","prevState","apiRequest","newArticles","hits","warn","message","length","prevProps","img","color","height","width","timeout","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"wIACAA,EAAOC,QAAU,CAAC,SAAW,wBAAwB,MAAQ,uB,mBCA7DD,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,sBAAwB,kD,mBCAxGD,EAAOC,QAAU,CAAC,aAAe,qC,wCCAjCD,EAAOC,QAAU,CAAC,IAAM,mB,kBCAxBD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,iBAAmB,oCAAoC,sBAAwB,yCAAyC,gBAAkB,qC,+KCM3NC,E,4MACnBC,MAAQ,CACNC,MAAO,I,EAGTC,iBAAmB,SAAAC,GACjB,EAAKC,SAAS,CAAEH,MAAOE,EAAME,cAAcC,MAAMC,gBAC7C,EAAKP,MAAMC,MAAMO,Q,EAKvBC,aAAe,SAAAN,GAGb,GAFAA,EAAMO,iBAE0B,KAA5B,EAAKV,MAAMC,MAAMO,OAGnB,OAFAG,IAAMC,MAAM,wHACZC,QAAQC,IAAI,EAAKd,MAAMC,OAIzB,EAAKc,MAAMC,SAAS,EAAKhB,MAAMC,OAC/B,EAAKG,SAAS,CAAEH,MAAO,M,4CAGzB,WACE,OACE,wBAAQgB,UAAWC,IAAOC,UAA1B,SACE,uBACEF,UAAWC,IAAOE,WAClBJ,SAAUK,KAAKZ,aACfa,MAAOJ,IAAOK,KAHhB,UAKE,uBACEN,UAAWC,IAAOM,gBAClBC,KAAK,OACLC,KAAK,QACLpB,MAAOe,KAAKrB,MAAMC,MAClB0B,SAAUN,KAAKnB,iBACf0B,YAAY,6BAEd,yBAAQH,KAAK,SAASR,UAAWC,IAAOW,iBAAxC,UACG,cAAC,IAAD,IACD,sBAAMZ,UAAWC,IAAOY,sBAAxB,gC,GA3C2BC,a,iBCFjCC,EAAeC,SAASC,cAAc,eAEtCC,E,4MASJC,WAAa,SAAAC,GACI,WAAXA,EAAEC,MACJ,EAAKvB,MAAMwB,W,EAIfC,oBAAsB,SAAAH,GAChBA,EAAEI,SAAWJ,EAAEhC,eACjB,EAAKU,MAAMwB,UAEb1B,QAAQC,IAAIuB,EAAEI,QACd5B,QAAQC,IAAIuB,EAAEhC,eACdQ,QAAQC,IAAI,EAAKC,MAAMwB,U,uDApBzB,WACEG,OAAOC,iBAAiB,UAAWtB,KAAKe,c,kCAG1C,WACEM,OAAOE,oBAAoB,UAAWvB,KAAKe,c,oBAkB7C,WAGE,OADAvB,QAAQC,IAAIO,KAAKN,MAAM8B,YAChBC,uBACL,qBAAK7B,UAAWC,IAAO6B,SAAUC,QAAS3B,KAAKmB,oBAA/C,SACE,qBAAKvB,UAAWC,IAAO+B,MAAvB,SACE,qBAAKC,IAAK7B,KAAKN,MAAM8B,WAAYM,IAAI,YAGzCnB,O,GAjCcD,aA2CLI,I,iBCnCAiB,EAbU,SAAC,GACxB,OADyC,EAAfC,SACVC,KAAI,YAA0C,IAAvCC,EAAsC,EAAtCA,GAAIC,EAAkC,EAAlCA,aAAcC,EAAoB,EAApBA,cACvC,OACE,oBAAIxC,UAAWC,IAAOkC,iBAA2BM,EAAGD,EAApD,SACE,qBACExC,UAAWC,IAAOyC,sBAClBT,IAAKM,EACLL,IAAI,MAJqCI,O,iBCA7CK,E,4MACJ5D,MAAQ,CACN6D,WAAW,EACXhB,WAAY,I,EAEdN,QAAU,WACR,EAAKnC,SAAS,CAAEyD,WAAW,K,EAG7BC,YAAc,SAAAzB,GACZ,GAAIA,EAAEI,SAAWJ,EAAEhC,cAAnB,CAKA,IAAM0D,EAAmB1B,EAAEI,OAAOuB,QAAQ,MAAMC,aAAa,KAG7D,EAAK7D,SAAS,CAAEyC,WAAYkB,EAAkBF,WAAW,M,4CAK3D,WAEE,OADAhD,QAAQC,IAAIO,KAAKrB,OAEf,qCACE,oBAAIiB,UAAWC,IAAO0C,aAAcZ,QAAS3B,KAAKyC,YAAlD,SACE,cAAC,EAAD,CAAkBT,SAAUhC,KAAKN,MAAMsC,aAExChC,KAAKrB,MAAM6D,WACV,cAAC,EAAD,CAAOtB,QAASlB,KAAKkB,QAASM,WAAYxB,KAAKrB,MAAM6C,oB,GA/BpCd,aAsCZ6B,I,iBCnCAM,EANA,SAAC,GAAD,IAAGlB,EAAH,EAAGA,QAAH,EAAY/C,MAAZ,OACb,wBAAQwB,KAAK,SAASuB,QAASA,EAAS/B,UAAWC,IAAOgD,OAA1D,wB,kCCAIC,EAAO,qCACbC,IAAMC,SAASC,QAFD,2BAId,IAAMC,EAAS,uCAAG,WAAOtE,GAAP,iCAAAyD,EAAA,6DAAcc,EAAd,+BAAqB,EAC/BC,EAAe,IAAIC,gBAAgB,CACvCC,IAAKR,EACLS,EAAG3E,EACH4E,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAAU,GACVR,SARc,kBAWSJ,IAAMa,IAAI,IAAMR,EAAaS,YAXtC,uBAWNC,EAXM,EAWNA,KAXM,kBAYPA,GAZO,uGAAH,sDAiBAZ,I,yBCVTa,G,kNACJpF,MAAQ,CACNqD,SAAU,GACVgC,QAAQ,EACRzE,MAAO,KACPX,MAAO,GAEPuE,KAAM,G,EAGRc,iBAAmB,SAAArF,GACjB,EAAKG,SAAS,CAAEH,UAChBY,QAAQC,IAAIb,I,EAWdsF,UAAY,WACV,EAAKnF,UAAS,SAAAoF,GAAS,MAAK,CAC1BhB,KAAMgB,EAAUhB,KAAO,O,EAI3BiB,W,sBAAa,kCAAA/B,EAAA,+DACa,EAAK1D,MAArBC,EADG,EACHA,MAAOuE,EADJ,EACIA,KACf,EAAKpE,SAAS,CAAEiF,QAAQ,IAFb,kBAIiBd,EAAUtE,EAAOuE,GAJlC,cAIHkB,EAJG,OAKT,EAAKtF,UAAS,SAAAoF,GAAS,MAAK,CAC1BnC,SACEmC,EAAUvF,QAAUA,EAApB,sBACQuF,EAAUnC,UADlB,YAC+BqC,EAAYC,OAD3C,YAEQD,EAAYC,UATf,kBAYFD,EAAYC,MAZV,kCAcThF,IAAMiF,KAAN,UAAc,KAAMC,UAdX,yBAgBT,EAAKzF,SAAS,CAAEiF,QAAQ,IACW,IAA/B,EAAKrF,MAAMqD,SAASyC,QACtBnF,IAAMC,MAAM,2GAlBL,6E,wDAdb,SAAmBmF,EAAWP,GAC5B,MAAwBnE,KAAKrB,MAArBC,EAAR,EAAQA,MAAOuE,EAAf,EAAeA,KAEXgB,EAAUvF,QAAUA,GAASuF,EAAUhB,OAASA,GAClDnD,KAAKoE,e,oBAiCT,WACE,MAAoCpE,KAAKrB,MAAjCqD,EAAR,EAAQA,SAAUgC,EAAlB,EAAkBA,OAAQzE,EAA1B,EAA0BA,MAE1B,OACE,sBAAKK,UAAWC,IAAOM,gBAAvB,UACE,cAAC,EAAD,CAAWR,SAAUK,KAAKiE,mBACzBjE,KAAKrB,MAAM6D,WACV,cAAC,EAAD,CAAOmC,IAAK3E,KAAKrB,MAAMqD,SAASI,gBAEjC7C,GAAS,+DAAkCA,EAAMiF,WACjDR,GACC,cAAC,IAAD,CACE5D,KAAK,YACLwE,MAAM,UACNC,OAAQ,IACRC,MAAO,IACPC,QAAS,MAGZ/C,EAASyC,OAAS,GAAK,cAAC,EAAD,CAAczC,SAAUA,IAC/CA,EAASyC,OAAS,GACjB,cAAC,EAAD,CAAQ7F,MAAOoB,KAAKrB,MAAMC,MAAO+C,QAAS3B,KAAKkE,YAEjD,cAAC,IAAD,CAAgBc,UAAW,a,GA3EjBtE,cAiFHqD,ICzFfkB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFvE,SAASwE,eAAe,W","file":"static/js/main.e87fec79.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__19iaz\",\"modal\":\"Modal_modal__2VViG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3bpBZ\",\"ImageGalleryItemimage\":\"ImageGalleryItem_ImageGalleryItemimage__1xsbi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2BDTl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2TL3l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__2DBfT\",\"SearchForm\":\"Searchbar_SearchForm__2HHS5\",\"SearchFormbutton\":\"Searchbar_SearchFormbutton__lxTZY\",\"SearchFormbuttonlabel\":\"Searchbar_SearchFormbuttonlabel__2Wfk6\",\"SearchForminput\":\"Searchbar_SearchForminput__3vKVY\"};","import { Component } from 'react';\r\nimport { ImSearch } from 'react-icons/im';\r\nimport { toast } from 'react-toastify';\r\nimport styles from './Searchbar.module.css';\r\n\r\n//const styles = { form: { marginBottom: 20 } };\r\n\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    image: '',\r\n  };\r\n\r\n  handleNameChange = event => {\r\n    this.setState({ image: event.currentTarget.value.toLowerCase() });\r\n    if (this.state.image.trim() === '') {\r\n      return;\r\n    }\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (this.state.image.trim() === '') {\r\n      toast.error('Введите имя картинки.');\r\n      console.log(this.state.image);\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.image);\r\n    this.setState({ image: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.searchbar}>\r\n        <form\r\n          className={styles.SearchForm}\r\n          onSubmit={this.handleSubmit}\r\n          style={styles.form}\r\n        >\r\n          <input\r\n            className={styles.SearchForminput}\r\n            type=\"text\"\r\n            name=\"image\"\r\n            value={this.state.image}\r\n            onChange={this.handleNameChange}\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n          <button type=\"submit\" className={styles.SearchFormbutton}>\r\n            {<ImSearch />}\r\n            <span className={styles.SearchFormbuttonlabel}>Search</span>\r\n          </button>\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Modal.module.css';\r\n\r\nconst modalRootRef = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.onEscPress);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.onEscPress);\r\n  }\r\n\r\n  onEscPress = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = e => {\r\n    if (e.target === e.currentTarget) {\r\n      this.props.onClose();\r\n    }\r\n    console.log(e.target);\r\n    console.log(e.currentTarget);\r\n    console.log(this.props.onClose);\r\n  };\r\n\r\n  render() {\r\n    //const { img } = this.props;\r\n    console.log(this.props.largeimage);\r\n    return createPortal(\r\n      <div className={styles.backdrop} onClick={this.handleBackdropClick}>\r\n        <div className={styles.modal}>\r\n          <img src={this.props.largeimage} alt=\"111\" />\r\n        </div>\r\n      </div>,\r\n      modalRootRef,\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  img: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Modal;\r\n\r\n// import { createPortal } from 'react-dom';\r\n// import styles from './Modal.module.css';\r\n\r\n// const modalRootRef = document.querySelector('#modal-root');\r\n\r\n// const Modal = ({ largeImage }) => {\r\n//   return createPortal(\r\n//     <div className={styles.backdrop} onClick={this.handleBackdropClick}>\r\n//       <div className={styles.modal}>\r\n//         <img src={largeImage} alt=\"111\" />\r\n//       </div>\r\n//     </div>,\r\n//     modalRootRef,\r\n//   );\r\n// };\r\n// export default Modal;\r\n","import styles from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ articles }) => {\r\n  return articles.map(({ id, webformatURL, largeImageURL }) => {\r\n    return (\r\n      <li className={styles.ImageGalleryItem} key={id} a={largeImageURL}>\r\n        <img\r\n          className={styles.ImageGalleryItemimage}\r\n          src={webformatURL}\r\n          alt=\"\"\r\n        />\r\n      </li>\r\n    );\r\n  });\r\n};\r\nexport default ImageGalleryItem;\r\n","import { Component } from 'react';\r\nimport Modal from '../Modal/Modal';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport styles from './ImageGallery.module.css';\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    openModal: false,\r\n    largeimage: '',\r\n  };\r\n  onClose = () => {\r\n    this.setState({ openModal: false });\r\n  };\r\n\r\n  getImglarge = e => {\r\n    if (e.target === e.currentTarget) {\r\n      return;\r\n    }\r\n    // console.log(e.target.closest('li'));\r\n    // console.log(e.target.a);\r\n    const openModalGallery = e.target.closest('li').getAttribute('a');\r\n    // console.log(openModalGallery);\r\n\r\n    this.setState({ largeimage: openModalGallery, openModal: true });\r\n    // this.setState({ openModal: true });\r\n    //console.log(this.state.openModal);\r\n  };\r\n  //const ImageGallery = ({ articles }) => (\r\n  render() {\r\n    console.log(this.state);\r\n    return (\r\n      <>\r\n        <ul className={styles.ImageGallery} onClick={this.getImglarge}>\r\n          <ImageGalleryItem articles={this.props.articles} />\r\n        </ul>\r\n        {this.state.openModal && (\r\n          <Modal onClose={this.onClose} largeimage={this.state.largeimage} />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import styles from './Button.module.css';\r\n\r\nconst Button = ({ onClick, image }) => (\r\n  <button type=\"button\" onClick={onClick} className={styles.Button}>\r\n    Load more\r\n  </button>\r\n);\r\n\r\nexport default Button;\r\n","import axios from 'axios';\r\n\r\nconst BASE_URL = `https://pixabay.com/api/`;\r\nconst API_KEY = `24480500-399700875c121f80bab96d725`;\r\naxios.defaults.baseURL = BASE_URL;\r\n\r\nconst fetchData = async (image, page = 1) => {\r\n  const queryOptions = new URLSearchParams({\r\n    key: API_KEY,\r\n    q: image,\r\n    image_type: 'photo',\r\n    orientation: 'horizontal',\r\n    safesearch: true,\r\n    per_page: 12,\r\n    page,\r\n  });\r\n  try {\r\n    const { data } = await axios.get('?' + queryOptions.toString());\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\nexport default fetchData;\r\n\r\n//    return axios\r\n//     .get(`https://pixabay.com/api/?q=${searchQuery}&page=1&key=24480500-399700875c121f80bab96d725&image_type=photo&orientation=horizontal&per_page=12`)\r\n//    .then(response => response.data.hits);\r\n//  };\r\n\r\n// export default fetchData;\r\n\r\n// `https://pixabay.com/api/?q=${searchQuery}&page=1&key=24480500-399700875c121f80bab96d725&image_type=photo&orientation=horizontal&per_page=12`\r\n","import { Component } from 'react';\r\nimport Searchbar from '../Searchbar/Searchbar';\r\nimport Modal from '../Modal/Modal';\r\nimport ImageGallery from '../ImageGallery/ImageGallery';\r\nimport Button from '../Button/Button';\r\nimport styles from './App.module.css';\r\nimport fetchData from '../servises/articlesApi';\r\n//import axios from 'axios';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    articles: [],\r\n    loader: false,\r\n    error: null,\r\n    image: '',\r\n\r\n    page: 1,\r\n  };\r\n\r\n  handleFormSubmit = image => {\r\n    this.setState({ image });\r\n    console.log(image);\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { image, page } = this.state;\r\n\r\n    if (prevState.image !== image || prevState.page !== page) {\r\n      this.apiRequest();\r\n    }\r\n  }\r\n\r\n  nextPages = () => {\r\n    this.setState(prevState => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  };\r\n\r\n  apiRequest = async () => {\r\n    const { image, page } = this.state;\r\n    this.setState({ loader: true });\r\n    try {\r\n      const newArticles = await fetchData(image, page);\r\n      this.setState(prevState => ({\r\n        articles:\r\n          prevState.image !== image\r\n            ? [...prevState.articles, ...newArticles.hits]\r\n            : [...newArticles.hits],\r\n        // articles: [...prevState.articles, ...newArticles.hits],\r\n      }));\r\n      return newArticles.hits;\r\n    } catch (error) {\r\n      toast.warn(`${error.message}`);\r\n    } finally {\r\n      this.setState({ loader: false });\r\n      if (this.state.articles.length === 0) {\r\n        toast.error('Картинок ненайдено');\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { articles, loader, error } = this.state;\r\n\r\n    return (\r\n      <div className={styles.SearchForminput}>\r\n        <Searchbar onSubmit={this.handleFormSubmit} />\r\n        {this.state.openModal && (\r\n          <Modal img={this.state.articles.largeImageURL} />\r\n        )}\r\n        {error && <p>Whoops, something went wrong: {error.message}</p>}\r\n        {loader && (\r\n          <Loader\r\n            type=\"ThreeDots\"\r\n            color=\"#d35050\"\r\n            height={100}\r\n            width={100}\r\n            timeout={3000} //3 secs\r\n          />\r\n        )}\r\n        {articles.length > 0 && <ImageGallery articles={articles} />}\r\n        {articles.length > 0 && (\r\n          <Button image={this.state.image} onClick={this.nextPages} />\r\n        )}\r\n        <ToastContainer autoClose={2000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}